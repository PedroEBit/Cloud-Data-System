name: Automatic CSV Upload to Azure Storage

on:
  push:
    branches:
      - main  # Gatilho: executa quando h√° um push para a branch 'main'

jobs:
  upload-data:
    runs-on: ubuntu-latest

    steps:
    - name: ‚¨áÔ∏è Checkout do Reposit√≥rio
      uses: actions/checkout@v4

    - name: üêç Configurar Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x'

    - name: üì¶ Instalar depend√™ncias da Azure SDK
      run: pip install azure-storage-blob

    - name: ‚¨ÜÔ∏è Executar Upload do CSV para Azure Storage Real
      working-directory: ${{ github.workspace }}
      # O script Python l√™ AZURE_STORAGE_CONNECTION_STRING da se√ß√£o 'env'
      env:
        # Passa o secret de forma segura como vari√°vel de ambiente
        AZURE_STORAGE_CONNECTION_STRING: ${{ secrets.AZURE_STORAGE_CONNECTION_STRING }}
      run: python upload_file_to_storage.py